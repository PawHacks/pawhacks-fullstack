<h1>Create Team</h1>

<form action="/create_team" method="POST">
    <label for="team_name">Team Name</label><br>
    <input type="input" id="team_name" name="team_name" placeholder="Team Paws"><br>

    <label for="is_open">Do You Want Your Team To Be Open? (strangers can join)</label>
    <fieldset>
        <legend></legend>
        <label for="open_yes">Yes:</label>
        <input type="radio" id="open_yes" name="is_open" value="true" required>
        
        <label for="open_no">No:</label>
        <input type="radio" id="open_no" name="is_open" value="false" required>
    </fieldset>

    <input type="submit" value="Submit"><br>
</form>

<table class="table table-bordered">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Email</th>
      <th scope="col">Phone</th>
      <th scope="col">University</th>
      <th scope="col">Status</th>
      <th scope="col" class="text-end">Action</th>
    </tr>
  </thead>
  <tbody>

  <h5>Team  </h5>
  <h5>Open Team:  </h5>
  <h7>Open team means strangers can ask to join your team</h7>


    {{#each teammates}}
    <tr>
      <th scope="row">{{this.id}}</th>
      <td>{{this.first_name}}</td>
      <td>{{this.last_name}}</td>
      <td>{{this.email}}</td>
      <td>{{this.phone_number}}</td>
      <td>{{this.university}}</td>
      <td>
        {{#if (eq this.google_id ../owner_google_id)}}
          Team Owner
        {{else}}
          {{#if (eq this.accepted_invitation 'ACCEPTED')}}
            Member - Accepted Invitation
          {{else}}
            {{#if (eq this.accepted_invitation 'PENDING')}}
              Member - Pending Invitation 
            {{else}}
              Not Member - Declined Invitation
            {{/if}}
          {{/if}}
        {{/if}}
      </td>
      <td class="text-end">
      {{#if ../is_owner}} <!-- Check if the logged-in user is the team owner -->
      {{#unless (eq this.google_id ../owner_google_id)}} <!-- Check if the current google_id is not the owner's -->
        <form action="/remove_team_member/{{this.google_id}}" method="POST">
          <!-- Hidden inputs or CSRF tokens if needed -->
          <button type="submit" class="btn btn-light btn-small">
            <i class="bi bi-person-x"></i> Remove
          </button>
        </form>
      {{/unless}}
      {{else}}
        {{#if (eq this.accepted_invitation 'PENDING')}}
        <form action="/accept_team_invitation/{{this.google_id}}/{{../team_id}}" method="POST">
            <button type="submit" class="btn btn-light btn-small">
                <i class="bi bi-check-lg"></i> Join Team
            </button>
        </form>
        <form action="/decline_team_invitation/{{this.google_id}}/{{../team_id}}" method="POST">
            <button type="submit" class="btn btn-light btn-small">
                <i class="bi bi-person-x"></i> Decline Team Invitation
            </button>
        </form>
      {{/if}}
      {{/if}} 
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>
  <h7>Max amount of members per team is 4</h7>

<form action="/add_team_members" method="POST">
  <label for="add_team_members_email">Add Team Members (enter email)</label><br>
  <input type="input" id="add_team_members_email" name="add_team_members_email" placeholder="yourfriend@email.com">

  <input type="submit" value="Submit"><br>
</form>